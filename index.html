<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Enviar ubicación</title>
</head>
<body>
  <h2>Compartir tu ubicación actual</h2>
  <button onclick="obtenerUbicacion()">Obtener mi ubicación</button>

  <p id="mensaje"></p>
  <p id="coordenadas"></p>

  <!-- Botones para enviar -->
  <button id="btnCorreo" style="display:none;" onclick="enviarCorreo()">Enviar por correo</button>
  <button id="btnWhatsApp" style="display:none;" onclick="enviarWhatsApp()">Enviar por WhatsApp</button>

  <script>
    let lat = null;
    let lon = null;

    function obtenerUbicacion() {
      if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(
          function(pos) {
            lat = pos.coords.latitude.toFixed(6);
            lon = pos.coords.longitude.toFixed(6);

            document.getElementById('mensaje').textContent = 'Ubicación obtenida:';
            document.getElementById('coordenadas').textContent = `Latitud: ${lat}, Longitud: ${lon}`;

            document.getElementById('btnCorreo').style.display = 'inline-block';
            document.getElementById('btnWhatsApp').style.display = 'inline-block';
          },
          function(error) {
            document.getElementById('mensaje').textContent = 'Error al obtener la ubicación: ' + error.message;
            document.getElementById('coordenadas').textContent = '';
            document.getElementById('btnCorreo').style.display = 'none';
            document.getElementById('btnWhatsApp').style.display = 'none';
          }
        );
      } else {
        document.getElementById('mensaje').textContent = 'Tu navegador no soporta geolocalización.';
      }
    }

    function enviarCorreo() {
      if (lat && lon) {
        const asunto = encodeURIComponent('Mi ubicación actual');
        const cuerpo = encodeURIComponent(`Estas son mis coordenadas:\nLatitud: ${lat}\nLongitud: ${lon}\nhttps://www.google.com/maps?q=${lat},${lon}`);
        const email = 'tucorreo@ejemplo.com'; // Cambia este correo por el tuyo
        window.location.href = `mailto:${email}?subject=${asunto}&body=${cuerpo}`;
      }
    }

    function enviarWhatsApp() {
      if (lat && lon) {
        const mensaje = encodeURIComponent(`Hola, estas son mis coordenadas:\nLatitud: ${lat}\nLongitud: ${lon}\nhttps://www.google.com/maps?q=${lat},${lon}`);
        // Cambia el número abajo por tu número WhatsApp en formato internacional sin +
        const numeroWhatsApp = '593968963177'; 
        const url = `https://wa.me/${numeroWhatsApp}?text=${mensaje}`;
        window.open(url, '_blank');
      }
    }
  </script>
</body>
</html>
